Games/ASWAIW/ASWAIW.binm8
2
64
0
0
2048
16384
0
0
2
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Player.png
0
1024
32
32
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Player.png
1024
1024
32
32
64
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
0
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
256
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
512
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
768
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
1024
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
1280
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
1536
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
1792
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
2048
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
2304
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
2560
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
2816
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
3072
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
3328
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
3584
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
3840
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
4096
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
4352
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
4608
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
4864
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
5120
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
5376
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
5632
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
5888
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
6144
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
6400
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
6656
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
6912
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
7168
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
7424
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
7680
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
7936
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
8192
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
8448
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
8704
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
8960
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
9216
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
9472
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
9728
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
9984
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
10240
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
10496
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
10752
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
11008
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
11264
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
11520
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
11776
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
12032
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
12288
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
12544
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
12800
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
13056
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
13312
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
13568
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
13824
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
14080
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
14336
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
14592
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
14848
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
15104
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
15360
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
15616
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
15872
256
/home/bruno-vignoli/Documents/GitHub/Monster8/Games/ASWAIW/Medias/Tileset.png
16128
256
0
0
241
; ==========================
; And Space Was Again In War
;
; (c) 2025 Bruno Vignoli
; ==========================

; ====================
; start of the program
; ====================
start:
call InitializeGame

; =========
; main loop
; =========
MainLoop:
call AnimatePlayer
call MovePlayer
flip
call SlowDown
jp MainLoop

; ==========
; initialize
; ==========
InitializeGame:
paper 0
pen 255
border 0
cls

ld a0,144
call SetPX
ld d0,164
call SetPY

call StorePlayerBG
call DrawPlayer
ret

; ============
; get px in a0
; ============
GrabPX:
ld a0,px
ld d0,[a0]
push a0
pop a1
inc a1
ld d1,[a1]
push a1
pop a2
inc a2
ld d2,[a2]
push d0,d1,d2
pop a0
ret

; ============
; get py in d0
; ============
GrabPY:
push a0
ld a0,py
ld d0,[a0]
pop a0
ret

; ============
; set px in a0
; ============
SetPX:
push a0
pop d0,d1,d2
ld a0,px
ld [a0],d0
push a0
pop a1
inc a1
ld [a1],d1
push a1
pop a2
inc a2
ld [a2],d2
ret

; ============
; set py in d0
; ============
SetPY:
ld a0,py
ld [a0],d0
ret

; ===============
; move the player
; ===============
MovePlayer:
call RestorePlayerBG

getjoystick  ; get joystick input in D0
ld d1,0x04 ; left joystick value
and d1
cp d1
jp nz,MPNotMoveLeft

; move left
call GrabPX
dec a0
call SetPX
call LimitPXLeft

MPNotMoveLeft:

getjoystick  ; get joystick input in D0
ld d1,0x08 ; right joystick value
and d1
cp d1
jp nz,MPNotMoveRight

; move right
call GrabPX
inc a0
call SetPX
call LimitPXRight

MPNotMoveRight:

call StorePlayerBG
call DrawPlayer
ret

; ========================
; limit player's movements
; ========================
LimitPXLeft:
call GrabPX
cp a0,1
ret nc
ld a0,1
call SetPX
ret

LimitPXRight:
call GrabPX
cp a0,287
ret c
ld a0,287
call SetPX
ret

; =========================
; store player's background
; =========================
StorePlayerBG:
call GrabPX
call GrabPY
ld d1,32
ld d2,32
ld a1,pbg
grab ; grab background at a0,d0, d1,d2, a1
ret

; ===========
; draw player
; ===========
DrawPlayer:
ld d0,0
ld d1,0
ld a2,pframe
ld d2,[a2]
push d0,d1,d2
pop a0 ; a0 contient le num√©ro de frame (0 ou 1)
ld a1,0x400
mult a0,a1
push a0
call GrabPX
call GrabPY
ld d1,32
ld d2,32
pop a1
sprite ; draw sprite at a0,d0, d1,d2, a1
ret

; ===========================
; restore player's background
; ===========================
RestorePlayerBG:
call GrabPX
call GrabPY
ld d1,32
ld d2,32
ld a1,pbg
block ; draw background block at a0,d0, d1,d2, a1
ret

; ==============
; animate player
; ==============
AnimatePlayer:
ld a0,pframe
ld d0,[a0]
cp 1
jp z,APLoop
inc d0
jp APEnd
APLoop:
ld d0,0
APEnd:
ld [a0],d0
ret

; =================
; slowdown the game
; =================
SlowDown:
ld a0,0x2000
sd_loop:
dec a0
push a0
pop d0,d1,d2
add d1
add d2
cp 0
ret z
jp sd_loop

; ====
; data
; ====
; 24 bits px
px: db 0, 0, 0

; 8 bits py
py: db 0

; frame animation for the player
pframe: db 0

; player's background
pbg: ds 1024,0
